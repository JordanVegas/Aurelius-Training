להלן **הסבר ברור ומסודר** על `malloc`, `calloc`, `realloc` ו־`free`, עם דגש על **ההבדלים בין שלושת הראשונים** (כפי שנשאל).

---

## הקשר כללי

שלושת הפונקציות:

* משמשות ל**הקצאת זיכרון דינמית (Heap)**
* מוגדרות ב־`<stdlib.h>`
* מחזירות **מצביע (`void*`)** לזיכרון שהוקצה
* מחייבות שחרור עם `free`

---

## 1️⃣ `malloc` – הקצאת זיכרון גולמי

```c
int *arr = malloc(10 * sizeof(int));
```

### מאפיינים

* מקצה **בלוק זיכרון בגודל נתון בבייטים**
* **לא מאתחל** את הזיכרון (ערכים אקראיים)
* מהיר יחסית

### שימוש אופייני

כשלא אכפת מהערכים ההתחלתיים או שמתכוונים לאתחל ידנית.

---

## 2️⃣ `calloc` – הקצאה + אתחול לאפס

```c
int *arr = calloc(10, sizeof(int));
```

### מאפיינים

* מקצה זיכרון ל־**מספר איברים × גודל איבר**
* **מאפס את כל הזיכרון (0)**
* איטי מעט יותר מ־`malloc`

### שימוש אופייני

כשצריך מערך מאותחל (למשל מונים, דגלים).

---

## 3️⃣ `realloc` – שינוי גודל של זיכרון קיים

```c
arr = realloc(arr, 20 * sizeof(int));
```

### מאפיינים

* משנה גודל של זיכרון שכבר הוקצה
* שומר את הנתונים הקיימים (עד המינימום בין הישן לחדש)
* עלול:

  * להרחיב במקום
  * או להקצות בלוק חדש ולהעתיק אליו
* אם נכשל → מחזיר `NULL` (והזיכרון המקורי נשאר!)

### שימוש אופייני

מבנים שגדלים/קטנים דינמית (כמו מערך שמתארך).

---

## 4️⃣ `free` – שחרור זיכרון

```c
free(arr);
arr = NULL;
```

* משחרר זיכרון שהוקצה עם `malloc/calloc/realloc`
* חובה כדי למנוע **דליפות זיכרון**
* אין גישה לזיכרון לאחר `free` (Undefined Behavior)

---

## השוואה מסכמת (חשוב למבחן)

| פונקציה   | מה היא עושה  | אתחול            | מתי משתמשים          |
| --------- | ------------ | ---------------- | -------------------- |
| `malloc`  | הקצאת זיכרון | ❌ לא מאתחל       | ביצועים / אתחול ידני |
| `calloc`  | הקצאה למערך  | ✔ מאפס           | מונים / דגלים        |
| `realloc` | שינוי גודל   | ❌ לא מאתחל תוספת | מבנים דינמיים        |
| `free`    | שחרור        | —                | סיום שימוש           |

---

## נקודות טריק למבחנים

* `malloc` ו־`calloc` **לא בודקות overflow**
* `calloc(n, size)` ≠ `malloc(n * size)` (אתחול!)
* תמיד לבדוק `NULL`
* לעולם לא להשתמש בזיכרון אחרי `free`

---

## משפט קצר למבחן

> `malloc` מקצה זיכרון לא מאותחל, `calloc` מקצה ומאתחל את הזיכרון לאפס, ו־`realloc` משנה את גודל הזיכרון שהוקצה תוך ניסיון לשמור על הנתונים הקיימים.
